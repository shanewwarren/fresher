# Fresher Specifications

Design documentation for a portable Ralph Loop implementation that enables AI-driven iterative development using Claude Code.

## Overview

Fresher implements the Ralph Loop methodology - an iterative execution model with two modes (PLANNING and BUILDING) that uses fresh context each iteration, enabling specification-driven development with AI assistance.

> **Note:** Fresher was rewritten from Bash to Rust in v2.0.0 for single-binary distribution. All specs have been updated for the Rust architecture.

**Status Legend:**
- **Implemented** - Feature complete (Rust)
- **Planned** - Design complete, not yet implemented

---

## Core Components

| Spec | Status | Purpose |
|------|--------|---------|
| [loop-executor.md](./loop-executor.md) | **Implemented** | Loop execution via `fresher plan` and `fresher build` commands (`src/commands/plan.rs`, `build.rs`) |
| [prompt-templates.md](./prompt-templates.md) | **Implemented** | PROMPT.md files for PLANNING and BUILDING modes (`src/templates.rs`) |
| [project-scaffold.md](./project-scaffold.md) | **Implemented** | `fresher init` command with project detection (`src/commands/init.rs`) |
| [impl-structure.md](./impl-structure.md) | **Planned** | Hierarchical implementation plans with `impl/` directory for context efficiency |

## Verification & Quality

| Spec | Status | Purpose |
|------|--------|---------|
| [plan-verification.md](./plan-verification.md) | **Implemented** | `fresher verify` command for spec coverage analysis (`src/verify.rs`) |
| [self-testing.md](./self-testing.md) | **Implemented** | 77 unit tests + 46 integration tests (`tests/*.rs`) |

## Extensibility

| Spec | Status | Purpose |
|------|--------|---------|
| [lifecycle-hooks.md](./lifecycle-hooks.md) | **Implemented** | Bash hooks with timeout, exit codes, env vars (`src/hooks.rs`) |
| [docker-isolation.md](./docker-isolation.md) | **Implemented** | Container detection, devcontainer support (`src/docker.rs`) |
| [docker-ux.md](./docker-ux.md) | **Implemented** | Auto-orchestration, streaming output, dependency presets (`src/docker.rs`) |

## Distribution & Usage

| Spec | Status | Purpose |
|------|--------|---------|
| [installer.md](./installer.md) | **Implemented** | `fresher upgrade` command for self-update from GitHub (`src/upgrade.rs`) |
| [project-integration.md](./project-integration.md) | **Implemented** | Part of `fresher init` - gitignore, project detection, CLAUDE.md |
| [documentation.md](./documentation.md) | **Implemented** | Comprehensive README with install, modes, hooks, config, troubleshooting |

---

## Quick Start

```bash
# Install Fresher (download binary or cargo install)
cargo install fresher
# Or download from GitHub releases

# Initialize Fresher in a project
fresher init

# Run planning mode (creates IMPLEMENTATION_PLAN.md)
fresher plan

# Run building mode (executes tasks from plan)
fresher build

# Verify spec coverage
fresher verify

# Check for updates
fresher upgrade --check
```

---

## Architecture Overview

```
# Rust Binary (single executable)
fresher                        # CLI with subcommands: init, plan, build, verify, upgrade, version

# Project Structure (created by `fresher init`)
project/
├── .fresher/
│   ├── config.toml            # Configuration (TOML format)
│   ├── PROMPT.planning.md     # Planning mode instructions
│   ├── PROMPT.building.md     # Building mode instructions
│   ├── AGENTS.md              # Project-specific operational knowledge
│   ├── hooks/                 # Lifecycle hook scripts (bash)
│   │   ├── started
│   │   ├── next_iteration
│   │   └── finished
│   ├── logs/                  # Iteration logs
│   ├── .state                 # Runtime state (gitignored)
│   └── docker/                # Docker isolation files (optional)
├── specs/                     # Specification files
│   └── README.md
├── IMPLEMENTATION_PLAN.md     # Generated by planning mode
└── CLAUDE.md                  # Project context (auto-loaded by Claude)
```

---

## Design Principles

1. **Fresh Context**: Each iteration starts with cleared context to stay in the "smart zone"
2. **Subagent Delegation**: Main agent coordinates, subagents handle heavy lifting
3. **Backpressure**: Tests and builds provide validation gates
4. **Portability**: `.fresher/` folder can be added to any project
5. **Safety First**: Docker isolation available for dangerous permissions mode
